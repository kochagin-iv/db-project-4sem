# Курсовой проект по дисциплине "Базы Данных"

---

### Введение

<b><u>Цель работы</u>:</b> получение практических навыков работы с промышленными СУБД, проектирование
БД (концептуальное, логическое, физическое), создание хранимых процедур, представлений,
триггеров, индексов.  
<b><u>Инструменты</u>:</b> PostgreSQL 12, any programming language.

---

### Организационные моменты

Если при выполнении задания возникают вопросы, не стесняйтесь их задавать.

Если вы начинаете присылать задание за час до дедлайна, будьте готовы к тому, что полный балл вы
за него не получите, т.к. не успеете исправить все замечания.

Семинарист тоже человек, иногда спит / ест / живет своей жизнью и т.д., поэтому фидбек по своему
заданию вы будете получать не через минуту после отправки, а в течение дня.

И нет, если семинарист прямо сейчас в сети в тг / вк, это все еще не значит, что фидбек вы получите
сиюминутно. Учитывайте это, пожалуйста.

**_Дедлайны согласовывайте с семинаристами_**

---

### Постановка

1. Выбрать предметную область, выделить в ней 4-6 сущностей, согласовать с семинаристом.
2. Спроектировать базу данных:
   1. <u>Концептуальная модель</u>: все сущности из п.1 с указанием связей в нотации «воронья лапка». 
   2. <u>Логическая модель</u>: описание таблиц и их атрибутивного состава, а также указание связей в нотации «воронья 
   лапка». БД должна находиться во 2НФ или в 3НФ (аргументировать свой выбор). После нормализации ~ 8-10 сущностей. 
   Для описания использовать ER-диаграмму. Хотя бы одну таблицу необходимо сделать версионной. На выбор представляются 
   SCD типа 2 и 4. Для именования полей и сущностей использовать multitran. В полях использовать стандартные суффикса из
   соответствующего файла. 
   3. <u>Физическая модель</u>: описание хранения таблиц в СУБД. Для каждой сущности из п.2.ii подготовить таблицу вида
   (при желании можно добавить столбцы `PRIMARY KEY`, `FOREIGN KEY` со ссылкой на внешнюю таблицу):  
    

   **STUDENT**   

   Название       | Описание      | Тип данных     | Ограничение 
   -------------- | ------------- | -------------- | -----------
   `STUDENT_ID`   | Идентификатор | `INTEGER`      | `PRIMARY KEY`
   `STUDENT_NAME` | Имя студента  | `VARCHAR(128)` | `NOT NULL`
   ...            | ...           | ...            | ...

 3. Подготовить DDL скрипты и создать свою базу в СУБД.
 4. Наполнить созданную базу данными, ~10 записей в каждой таблице. По крайней мере по 1
    строке в каждой таблице должно быть добавлено с использованием `INSERT`.
 5. Написать не менее 10 `INSERT`, `SELECT`, `UPDATE`, `DELETE` запросов. Загуглить, что
    такое CRUD-запросы. Найти соответствие.
 6. Написать не менее 6 осмысленных `SELECT`-запросов с использованием:
    1. `GROUP BY + HAVING`
    2. `ORDER BY`
    3. `<func>(...) OVER(...)`:
       1. `PARTITION BY`
       2. `ORDER BY`
       3. `PARTITION BY + ORDER BY`
       4. `<func>` - все 3 типа функций - агрегирующие, ранжирующие, смещения
 7. К коду приложить ваши ожидания от работы запроса в виде комментария в CI. Пример: «В результате
    выполнения Запроса 1 будет получена сводная таблица с информацией о суммарном балле
    каждого студента XXX группы по итогам кр1».
 8. Создать индексы для таблиц, аргументировав выбор поля, по которому будет создан индекс.
 9. Подготовить не менее 6 представлений:
    1. 2-3 получаются сокрытием полей с персональными данными клиентов из таблицы, а
       также сокрытием технических полей. Для сокрытия полей с персональными данными
       недостаточно просто целиком удалить столбец с данными. Например, для поля
       `CARD_NO` можно использовать маскировку вида `4276********0000`.
    2. 3-4 получаются соединением нескольких таблиц с целью получения осмысленной
       сводной таблицы, например, хранящей некоторую статистику продаж/частот
       обращения клиента и т.д.
       Вместе с кодом приложить описание представления.
 10. Создать не менее 2 хранимых процедур. Логика процедур согласовывается с семинаристом.
 11. Создать не менее 2 триггеров. Логика согласовывается с семинаристом.
 12. Используя любимый язык программирования и библиотеку, сгенерировать данные и с их помощью вставить данные в уже 
     оформленную БД. Теми же инструментами извлечь данные [из таблицы на выбор], возможно, предварительно 
     агрегированные средствами СУБД, и провести анализ.

---

### Оценивание

Задание | Балл  | Примечание
------- | ----- | --------------
`1`     | `0`   | 
`2.i`   | `0.2` | 
`2.ii`  | `0.2` | 
`2.iii` | `0.3` | 
`3`     | `0.2` | 
`4`     | `0`   | Дублирует следующий пункт
`5`     | `0.1` | 
`6`     | `0.3` | По `0.05` за каждый осмысленный запрос
`7`     | `0`   | Без комментариев не засчитываются запросы из пункта выше
`8`     | `0.1` | 
`9`     | `0.6` | По `0.1` за каждое представление
`10`    | `0.4` | 
`11`    | `0.4` | 
`12`    | `0.6` | Придется самостоятельно править CI и устанавливать зависимости

Максимальный балл за проект равен 3 баллам, даже если вы наберете больше.

---

### Проверяющая система

Всем вам создали отдельные пустые репозитории с проектами. Подробнее про взаимодействие с репозиторием [можно
прочитать здесь](https://gitlab.com/fpmi-atp/db2022-supplementary/project-sample/-/tree/master).   

Отдельно стоит отметить, что вам предварительно потребуется скопировать без изменений в свои репозитории (по ссылке 
выше):
 * `runner/`
 * `.gitlab-ci.yml`

Файл `workflows.yaml` также необходим, но его необходимо поправить под нужды вашего проекта.